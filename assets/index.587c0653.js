var J=Object.defineProperty,X=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var _=(e,t,r)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,j=(e,t)=>{for(var r in t||(t={}))ee.call(t,r)&&_(e,r,t[r]);if(P)for(var r of P(t))te.call(t,r)&&_(e,r,t[r]);return e},Y=(e,t)=>X(e,Z(t));import{j as G,r as u,R as re,a as se}from"./vendor.1530fac7.js";const ne=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}};ne();function oe(e){return[...e].sort(()=>Math.random()-.5)}function w(e,t){return[...e[t].map(r=>r.value)]}function A(e,t){return e.map(r=>r[t].value)}function ae(e,t,r,c){const s=t%3,n=r%3;let o=[],d=[],y=[],C=[];switch(s){case 0:o=w(e,t+1),d=w(e,t+2);break;case 1:o=w(e,t-1),d=w(e,t+1);break;case 2:o=w(e,t-2),d=w(e,t-1);break}switch(n){case 0:y=A(e,r+1),C=A(e,r+2);break;case 1:y=A(e,r-1),C=A(e,r+1);break;case 2:y=A(e,r-2),C=A(e,r-1);break}return[...new Set([...o.concat(d,y,C)])].includes(c)}function q(e,t){return Math.floor(Math.random()*(t-e)+e)}const ce=9;function le(e,t,r,c){for(let d=0;d<e.length;d++)if(e[t][d]==c)return!1;for(let d=0;d<e.length;d++)if(e[d][r]==c)return!1;const s=Math.floor(Math.sqrt(e.length)),n=t-t%s,o=r-r%s;for(let d=n;d<n+s;d++)for(let y=o;y<o+s;y++)if(e[d][y]==c)return!1;return!0}function U(e,t){let r=-1,c=-1,s=!0;for(let n=0;n<t;n++)for(let o=0;o<t;o++){if(e[n][o]===0){r=n,c=o,s=!1;break}if(!s)break}if(s)return!0;for(let n=1;n<=t;n++)if(le(e,r,c,n)){if(e[r][c]=n,U(e,t))return!0;e[r][c]=0}return!1}function ie(){return[oe([1,2,3,4,5,6,7,8,9]),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0)]}function V(){const e=ie();if(U(e,ce))return[...e];throw new Error("Could not generate board...")}function ue(e){return e.map(r=>r.map(c=>({value:c,candidates:[],isLocked:!0,isCorrect:!0,showCorrectness:!1,isHighlighted:!1})))}function fe(e,t){const r=[...e];let c=1,s=0;for(;s<t;){if(c>250)throw new Error("CANNOT POKE");const n=q(0,9),o=q(0,9);r[n][o].value!==0&&ae(r,n,o,r[n][o].value)&&(r[n][o].value=0,r[n][o].isLocked=!1,r[n][o].isCorrect=!1,s++),c++}return r}const a=G.exports.jsx,b=G.exports.jsxs,$=u.exports.createContext(null),de=({children:e})=>{const[t,r]=u.exports.useState("IN_SELECT_DIFFICULTY"),[c,s]=u.exports.useState("normal"),[n,o]=u.exports.useState(40),[d,y]=u.exports.useState([]),[C,x]=u.exports.useState(""),[g,N]=u.exports.useState([]),[k,E]=u.exports.useState(0),[D,L]=u.exports.useState(0),[F,T]=u.exports.useState(0),[I,O]=u.exports.useState(!1);function M(S){switch(S){case"very easy":o(16);break;case"easy":o(26);break;case"normal":o(36);break;case"hard":o(46);break;case"very hard":o(56);break;default:o(36);break}return s(S)}function H(){y(V())}function R(S){let l=0;return S.forEach(i=>i.forEach(v=>{v.value||l++})),l}function h(S){const l=ue([...S]),i=fe([...l],n);let v=R(i);o(v),N(i)}function p(S){E(i=>i+=1);const l=[...S];for(let i in l)for(let v in l[i])l[i][v].isLocked||(l[i][v].showCorrectness=!0,l[i][v].value!==d[i][v]?(l[i][v].isCorrect=!1,L(B=>B+=1)):l[i][v].isCorrect=!0);l.every((i,v)=>i.every((B,W)=>B.value===d[v][W]))&&O(!0),N(l)}function f(S,l,i){const v=l*S,B=i/v*100;T(100-B)}function m(){y([]),N([]),M("normal"),E(0),T(0),L(0),O(!1)}return u.exports.useEffect(()=>{switch(t){case"IN_SELECT_DIFFICULTY":{m();break}case"IN_GAME":{const S=performance.now(),l=V(),i=performance.now();x((i-S).toPrecision(3)),y(l),h(l);break}}},[t]),u.exports.useEffect(()=>{k&&f(k,n,D)},[k]),a($.Provider,{value:{gameState:t,setGameState:r,difficulty:c,selectDifficulty:M,board:g,generationTime:C,generateSolvedBoard:H,checkCorrectness:p,attempts:k,isCorrectSolution:I,accuracy:F,numOfHoles:n},children:e})},he=[{name:"VERY EASY",value:"very easy"},{name:"EASY",value:"easy"},{name:"NORMAL",value:"normal"},{name:"HARD",value:"hard"},{name:"VERY HARD",value:"very hard"}],me=()=>{const{difficulty:e,selectDifficulty:t,setGameState:r}=u.exports.useContext($);return b("div",{className:"select-difficulty-screen",children:[a("h4",{children:"Select difficulty:"}),a("div",{className:"difficulty-btn-container",children:he.map((c,s)=>a("button",{className:`btn difficulty-btn ${e===c.value?"selected":""}`,onClick:()=>t(c.value),children:c.name},s))}),a("button",{className:"btn start-btn",onClick:()=>r("IN_GAME"),children:"START"}),a("p",{style:{marginTop:"1rem",fontSize:"9px",color:"rgba(255, 255, 255, 0.25)"},children:"version 1.0.3"})]})};function K(e){const t=Math.floor(e/60/60),r=Math.floor(e/60)%60,c=Math.floor(e-r*60);let s="";return s+=t?`${t}h `:"",s+=r?`${r}min `:"",s+=`${c}s`,s}function z(e){return Intl.NumberFormat("en-GB",{style:"percent",maximumFractionDigits:2}).format(e/100)}const pe=({generationTime:e,difficulty:t,timer:r,numOfFilled:c,numOfHoles:s,attempts:n,accuracy:o})=>b("div",{className:"info-screen",children:[b("p",{className:"info",children:[a("b",{children:"Difficulty"}),": ",a("span",{className:"info-difficulty",children:t})]}),b("p",{className:"info",children:[a("b",{children:"Filled cells"}),": ",c," of ",s]}),b("p",{className:"info",children:[a("b",{children:"Elapsed time"}),": ",K(r)]}),b("p",{className:"info",children:[a("b",{children:"Number of attempts"}),": ",n]}),b("p",{className:"info",children:[a("b",{children:"Accuracy"}),": ",n?z(o):"No attempts"]}),b("p",{className:"generation-time",children:["This board was generated in ",a("b",{children:e})," ms"]})]}),ge=({difficulty:e,timer:t,attempts:r,accuracy:c})=>b("div",{className:"result-screen",children:[a("h3",{className:"result-title",children:"WELL DONE!"}),b("p",{className:"result-info",children:["You completed this ",a("b",{children:e})," board"]}),b("p",{className:"result-info",children:["with ",a("b",{children:z(c)})," accuracy in"," ",b("b",{children:[r," ",r>1?"attempts":"attempt"]}),"."]}),b("p",{className:"result-info",children:["The game lasted for ",a("b",{children:K(t)})]})]}),Q=[1,2,3,4,5,6,7,8,9],Ne=({value:e,candidates:t,rowIndex:r,colIndex:c,onClose:s,onCellChange:n})=>{const[o,d]=u.exports.useState(e),[y,C]=u.exports.useState(t);function x(N){C(k=>k.includes(N)?k.filter(E=>E!==N):[...k,N])}function g(){d(0),C([])}return u.exports.useEffect(()=>{n(o,y,r,c)},[o,y]),u.exports.useEffect(()=>{d(e),C(t)},[r,c]),b("div",{className:"cell-editor",children:[b("div",{className:"editor-btn-container",children:[a("button",{className:"btn close-btn",onClick:()=>s(),children:"Close"}),a("button",{className:"btn reset-btn",onClick:()=>g(),children:"Reset"})]}),a("ul",{className:"cell-value-list",children:Q.map((N,k)=>a("button",{className:`btn val-btn ${N===o?"selected":""}`,onClick:()=>d(N===o?0:N),children:N},k))}),a("div",{className:"candidates-row",children:a("ul",{className:"cell-candidates-list",children:Q.map((N,k)=>a("button",{className:`btn candidate-btn ${y.includes(N)?"selected":""}`,onClick:()=>x(N),children:N},k))})})]})},be=()=>{const{board:e,generationTime:t,checkCorrectness:r,attempts:c,isCorrectSolution:s,difficulty:n,accuracy:o,numOfHoles:d,setGameState:y}=u.exports.useContext($),[C,x]=u.exports.useState([]),[g,N]=u.exports.useState(null),[k,E]=u.exports.useState(0),[D,L]=u.exports.useState(0),[F,T]=u.exports.useState(!0);function I(h){return h.map(f=>f.map(m=>Y(j({},m),{isHighlighted:!1})))}function O(h,p){x(f=>{const m=I(f);m[h].forEach(i=>i.isHighlighted=!0),m.forEach(i=>i[p].isHighlighted=!0);const S=h-h%3,l=p-p%3;for(let i=S;i<S+3;i++)for(let v=l;v<l+3;v++)m[i][v].isHighlighted=!0;return m[h][p].isHighlighted=!1,m})}function M(h,p,f,m){O(f,m),N({value:h,candidates:p,rowIndex:f,colIndex:m})}function H(){N(null),x(h=>I(h))}function R(h,p,f,m){x(S=>{const l=[...S];return l[f][m].value=h,l[f][m].candidates=p,l[f][m].showCorrectness=!1,l[f][m].isCorrect=!1,l})}return u.exports.useEffect(()=>{let h;return s?clearInterval(h):h=setInterval(()=>{E(p=>p+=1)},1e3),()=>clearInterval(h)},[s]),u.exports.useEffect(()=>{let h=0;C.forEach(p=>{p.forEach(f=>{!f.isLocked&&f.value&&(h+=1)})}),L(h),T(h===d)},[C]),u.exports.useEffect(()=>{x([...e])},[e]),b("div",{className:"sudoku-game-screen",children:[a("table",{className:"sudoku-board",cellPadding:"0",cellSpacing:"0",children:C.length?a("tbody",{children:C.map((h,p)=>a("tr",{className:"board-row",children:h.map((f,m)=>a("td",{className:`board-cell ${f.isLocked?"locked":""} ${s?"done":""} ${p===(g==null?void 0:g.rowIndex)&&m===g.colIndex?"selected":""} ${f.isHighlighted?"highlight":""}`,onClick:f.isLocked?void 0:()=>(g==null?void 0:g.rowIndex)===p&&g.colIndex===m?H():M(f.value,f.candidates,p,m),children:a("p",{className:`cell-value ${!f.isLocked&&f.showCorrectness?f.isCorrect?"correct":"incorrect":""}`,children:f.value?f.value:null})},m))},p))}):null}),b("div",{className:"bottom-container",children:[a("div",{className:`info-wrapper ${g?"":"open"}`,children:s?a(ge,{difficulty:n,timer:k,attempts:c,accuracy:o}):a(pe,{generationTime:t,difficulty:n,timer:k,numOfFilled:D,numOfHoles:d,attempts:c,accuracy:o})}),a("div",{className:`cell-editor-wrapper ${g?"open":""}`,children:g&&a(Ne,{value:g.value,candidates:g.candidates,rowIndex:g.rowIndex,colIndex:g.colIndex,onClose:H,onCellChange:R})})]}),b("div",{className:"game-btn-container",children:[a("button",{className:`btn ${s?"play-again-btn":"quit-btn"}`,onClick:()=>y("IN_SELECT_DIFFICULTY"),children:s?"Play Again":"Quit"}),!s&&a("button",{className:"btn try-solution-btn",onClick:()=>r(C),disabled:s||!F,children:"Try Solution"})]})]})},ye=()=>{const{board:e,gameState:t}=u.exports.useContext($);return b("div",{className:"App",children:[t==="IN_SELECT_DIFFICULTY"?a(me,{}):null,e.length?a(be,{}):null]})};re.render(a(se.StrictMode,{children:a(de,{children:a(ye,{})})}),document.getElementById("root"));

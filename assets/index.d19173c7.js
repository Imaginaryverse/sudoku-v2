import{j as w,r as i,R as Y,a as _}from"./vendor.1530fac7.js";const G=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}};G();function H(e){return[...e].sort(()=>Math.random()-.5)}const U=9;function q(e,s,n,t){for(let l=0;l<e.length;l++)if(e[s][l]==t)return!1;for(let l=0;l<e.length;l++)if(e[l][n]==t)return!1;const r=Math.floor(Math.sqrt(e.length)),o=s-s%r,a=n-n%r;for(let l=o;l<o+r;l++)for(let v=a;v<a+r;v++)if(e[l][v]==t)return!1;return!0}function L(e,s){let n=-1,t=-1,r=!0;for(let o=0;o<s;o++)for(let a=0;a<s;a++){if(e[o][a]===0){n=o,t=a,r=!1;break}if(!r)break}if(r)return!0;for(let o=1;o<=s;o++)if(q(e,n,t,o)){if(e[n][t]=o,L(e,s))return!0;e[n][t]=0}return!1}function M(){const e=[H([1,2,3,4,5,6,7,8,9]),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0)];if(L(e,U))return[...e];throw new Error("Could not generate board...")}function V(e){return e.map(n=>n.map(t=>({value:t,locked:t!==0,incorrect:!1})))}function K(e,s){const n=[...e];let t=0;for(;t<s;){const r=Math.floor(Math.random()*81),o=Math.floor(r/9),a=r%9;n[o][a].value!==0&&(n[o][a].value=0,n[o][a].locked=!1,t++)}return n}const c=w.exports.jsx,h=w.exports.jsxs,A=i.exports.createContext(null),W=({children:e})=>{const[s,n]=i.exports.useState("IN_SELECT_DIFFICULTY"),[t,r]=i.exports.useState("normal"),[o,a]=i.exports.useState(40),[l,v]=i.exports.useState([]),[g,k]=i.exports.useState([]),[N,d]=i.exports.useState(0),[m,u]=i.exports.useState(0),[x,E]=i.exports.useState(!1);function I(p){switch(p){case"very easy":a(15);break;case"easy":a(25);break;case"normal":a(40);break;case"hard":a(55);break;case"very hard":a(64);break;default:a(40);break}return r(p)}function T(){v(M())}function j(p){const y=V([...p]),f=K(y,o);k(f)}function F(p){d(f=>f+=1);const y=[...p];for(let f in y)for(let S in y[f])!y[f][S].locked&&y[f][S].value!==l[f][S]&&(y[f][S].incorrect=!0);y.every((f,S)=>f.every((C,b)=>C.value===l[S][b]))&&E(!0),k(y)}function O(p,y,f){let S=0;for(let b in f)for(let B in f[b])!f[b][B].locked&&f[b][B].value===l[b][B]&&(S+=1);const C=S/y*p;u(100-C)}function $(){const p=M();v(p),j(p),n("IN_GAME")}function P(){n("IN_SELECT_DIFFICULTY"),v([]),k([]),d(0),E(!1)}return i.exports.useEffect(()=>{O(N,o,g)},[N]),c(A.Provider,{value:{gameState:s,setGameState:n,difficulty:t,selectDifficulty:I,board:g,generateSolvedBoard:T,startGame:$,checkCorrectness:F,attempts:N,isCorrectSolution:x,goBack:P,accuracy:m},children:e})},z=[{name:"VERY EASY",value:"very easy"},{name:"EASY",value:"easy"},{name:"NORMAL",value:"normal"},{name:"HARD",value:"hard"},{name:"VERY HARD",value:"very hard"}],J=()=>{const{difficulty:e,selectDifficulty:s,startGame:n}=i.exports.useContext(A);return h("div",{className:"select-difficulty-screen",children:[c("h4",{children:"Select difficulty:"}),c("div",{className:"difficulty-btn-container",children:z.map((t,r)=>c("button",{className:`btn difficulty-btn ${e===t.value?"selected":""}`,onClick:()=>s(t.value),children:t.name},r))}),c("button",{className:"btn start-btn",onClick:()=>n(),children:"START"})]})};function D(e){const s=Math.floor(e/60/60),n=Math.floor(e/60)%60,t=Math.floor(e-n*60);let r="";return r+=s?`${s}h `:"",r+=n?`${n}min `:"",r+=`${t}s`,r}function R(e){return Intl.NumberFormat("en-GB",{style:"percent",maximumFractionDigits:2}).format(e/100)}const Q=({difficulty:e,timer:s,attempts:n,accuracy:t})=>h("div",{className:"info-screen",children:[h("p",{className:"info",children:[c("b",{children:"Difficulty"}),": ",c("span",{className:"info-difficulty",children:e})]}),h("p",{className:"info",children:[c("b",{children:"Elapsed time"}),": ",D(s)]}),h("p",{className:"info",children:[c("b",{children:"Number of attempts"}),": ",n]}),h("p",{className:"info",children:[c("b",{children:"Accuracy"}),": ",R(t)]})]}),X=({difficulty:e,timer:s,attempts:n,accuracy:t})=>h("div",{className:"result-screen",children:[c("h3",{className:"result-title",children:"Well done!"}),h("p",{className:"result-info",children:["In ",n<3?"just":""," ",h("b",{children:[n,n>1?" attempts":" attempt"]})," ","and ",c("b",{children:D(s)})," you completed a ",e," board with"," ",c("b",{children:R(t)})," accuracy!"]})]}),Z=()=>{const{board:e,checkCorrectness:s,attempts:n,isCorrectSolution:t,difficulty:r,accuracy:o,goBack:a}=i.exports.useContext(A),[l,v]=i.exports.useState([]),[g,k]=i.exports.useState(0);function N(d,m){if(t)return;const u=[...e];u[d][m].value===9?(u[d][m].value=0,u[d][m].incorrect=!1):(u[d][m].value++,u[d][m].incorrect=!1),v(u)}return i.exports.useEffect(()=>{let d;return t?clearInterval(d):d=setInterval(()=>{k(m=>m+=1)},1e3),()=>clearInterval(d)},[t]),i.exports.useEffect(()=>{v([...e])},[e]),h("div",{className:"sudoku-game-screen",children:[c("table",{className:"sudoku-board",cellPadding:"0",cellSpacing:"0",children:c("tbody",{children:l.length?l.map((d,m)=>c("tr",{className:"board-row",children:d.map((u,x)=>c("td",{className:`board-cell ${u.locked?"locked":""} ${t?"done":""}`,onClick:u.locked?void 0:()=>N(m,x),children:c("p",{className:`cell-value ${u.incorrect?"incorrect":""} ${t&&!u.locked&&!u.incorrect?"correct":""}`,children:u.value?u.value:null})},x))},m)):null})}),t?c(X,{difficulty:r,timer:g,attempts:n,accuracy:o}):c(Q,{difficulty:r,timer:g,attempts:n,accuracy:o}),h("div",{className:"game-btn-container",children:[c("button",{className:"btn back-btn",onClick:()=>a(),children:t?"Play Again":"Back"}),t?null:c("button",{className:"btn try-solution-btn",onClick:()=>s(l),disabled:t,children:"Try Solution"})]})]})},ee=()=>{const{board:e,gameState:s}=i.exports.useContext(A);return h("div",{className:"App",children:[c("h2",{style:{marginBottom:"1rem"},children:"TAP SUDOKU"}),s==="IN_SELECT_DIFFICULTY"?c(J,{}):null,e.length?c(Z,{}):null]})};Y.render(c(_.StrictMode,{children:c(W,{children:c(ee,{})})}),document.getElementById("root"));

import{j as L,r as f,R as G,a as P}from"./vendor.1530fac7.js";const Y=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}};Y();function H(e){return[...e].sort(()=>Math.random()-.5)}const U=9;function q(e,s,n,r){for(let i=0;i<e.length;i++)if(e[s][i]==r)return!1;for(let i=0;i<e.length;i++)if(e[i][n]==r)return!1;const t=Math.floor(Math.sqrt(e.length)),o=s-s%t,c=n-n%t;for(let i=o;i<o+t;i++)for(let v=c;v<c+t;v++)if(e[i][v]==r)return!1;return!0}function D(e,s){let n=-1,r=-1,t=!0;for(let o=0;o<s;o++)for(let c=0;c<s;c++){if(e[o][c]===0){n=o,r=c,t=!1;break}if(!t)break}if(t)return!0;for(let o=1;o<=s;o++)if(q(e,n,r,o)){if(e[n][r]=o,D(e,s))return!0;e[n][r]=0}return!1}function I(){const e=[H([1,2,3,4,5,6,7,8,9]),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0)];if(D(e,U))return[...e];throw new Error("Could not generate board...")}function V(e){return e.map(n=>n.map(r=>({value:r,locked:r!==0,incorrect:!1})))}function K(e,s){const n=[...e];let r=0;for(;r<s;){const t=Math.floor(Math.random()*81),o=Math.floor(t/9),c=t%9;n[o][c].value!==0&&(n[o][c].value=0,n[o][c].locked=!1,r++)}return n}const a=L.exports.jsx,h=L.exports.jsxs,C=f.exports.createContext(null),W=({children:e})=>{const[s,n]=f.exports.useState("IN_SELECT_DIFFICULTY"),[r,t]=f.exports.useState("normal"),[o,c]=f.exports.useState(40),[i,v]=f.exports.useState([]),[N,k]=f.exports.useState([]),[A,x]=f.exports.useState(0),[u,l]=f.exports.useState(0),[d,b]=f.exports.useState(!1);function R(p){switch(p){case"very easy":c(15);break;case"easy":c(25);break;case"normal":c(40);break;case"hard":c(55);break;case"very hard":c(64);break;default:c(40);break}return t(p)}function T(){v(I())}function O(p){const y=V([...p]),m=K(y,o);k(m)}function $(p){x(m=>m+=1);const y=[...p];for(let m in y)for(let S in y[m])!y[m][S].locked&&y[m][S].value!==i[m][S]&&(y[m][S].incorrect=!0);y.every((m,S)=>m.every((B,g)=>B.value===i[S][g]))&&b(!0),k(y)}function j(){n("IS_LOADING");const p=I();v(p),O(p),n("IN_GAME")}function F(){n("IN_SELECT_DIFFICULTY"),v([]),k([]),x(0),b(!1)}function _(p,y,m){let S=0;for(let g in m)for(let E in m[g])!m[g][E].locked&&m[g][E].value===i[g][E]&&(S+=1);const B=S/y*p;l(100-B)}return f.exports.useEffect(()=>{_(A,o,N)},[A]),a(C.Provider,{value:{gameState:s,setGameState:n,difficulty:r,selectDifficulty:R,board:N,generateSolvedBoard:T,startGame:j,checkCorrectness:$,attempts:A,isCorrectSolution:d,goBack:F,accuracy:u},children:e})},z=[{name:"VERY EASY",value:"very easy"},{name:"EASY",value:"easy"},{name:"NORMAL",value:"normal"},{name:"HARD",value:"hard"},{name:"VERY HARD",value:"very hard"}],J=()=>{const{difficulty:e,selectDifficulty:s,generateSolvedBoard:n,startGame:r}=f.exports.useContext(C);return h("div",{className:"select-difficulty-screen",children:[a("h4",{children:"Select difficulty:"}),a("div",{className:"difficulty-btn-container",children:z.map((t,o)=>a("button",{className:`btn difficulty-btn ${e===t.value?"selected":""}`,onClick:()=>s(t.value),children:t.name},o))}),a("button",{className:"btn start-btn",onClick:()=>r(),children:"START"})]})};function M(e){const s=Math.floor(e/60/60),n=Math.floor(e/60)%60,r=Math.floor(e-n*60);let t="";return t+=s?`${s}h `:"",t+=n?`${n}min `:"",t+=`${r}s`,t}function w(e){return Intl.NumberFormat("en-GB",{style:"percent",maximumFractionDigits:2}).format(e/100)}const Q=({difficulty:e,timer:s,attempts:n,accuracy:r})=>h("div",{className:"info-screen",children:[h("p",{className:"info",children:[a("b",{children:"Difficulty"}),": ",a("span",{className:"info-difficulty",children:e})]}),h("p",{className:"info",children:[a("b",{children:"Elapsed time"}),": ",M(s)]}),h("p",{className:"info",children:[a("b",{children:"Number of attempts"}),": ",n]}),h("p",{className:"info",children:[a("b",{children:"Accuracy"}),": ",w(r)]})]}),X=({difficulty:e,timer:s,attempts:n,accuracy:r})=>h("div",{className:"result-screen",children:[a("h3",{className:"result-title",children:"Well done!"}),h("p",{className:"result-info",children:["In ",n<3?"just":""," ",h("b",{children:[n,n>1?" attempts":" attempt"]})," ","and ",a("b",{children:M(s)})," you completed a ",e," board with"," ",a("b",{children:w(r)})," accuracy!"]})]}),Z=()=>{const{board:e,checkCorrectness:s,attempts:n,isCorrectSolution:r,difficulty:t,accuracy:o,goBack:c}=f.exports.useContext(C),[i,v]=f.exports.useState([]),[N,k]=f.exports.useState(0);function A(u,l){if(r)return;const d=[...e];d[u][l].value===9?(d[u][l].value=0,d[u][l].incorrect=!1):(d[u][l].value++,d[u][l].incorrect=!1),v(d)}function x(u,l){if(u===3||u===4||u===5){if(l===3||l===4||l===5)return"is-gray"}else return l===0||l===1||l===2||l===6||l===7||l===8?"is-gray":""}return f.exports.useEffect(()=>{let u;return r?clearInterval(u):u=setInterval(()=>{k(l=>l+=1)},1e3),()=>clearInterval(u)},[r]),f.exports.useEffect(()=>{v([...e])},[e]),h("div",{className:"sudoku-game-screen",children:[a("table",{className:"sudoku-board",cellPadding:"0",cellSpacing:"0",children:a("tbody",{children:i.length?i.map((u,l)=>a("tr",{className:"board-row",children:u.map((d,b)=>a("td",{className:`board-cell ${x(l,b)} ${d.locked?"locked":""} ${r?"done":""}`,onClick:d.locked?void 0:()=>A(l,b),children:a("p",{className:`cell-value ${d.incorrect?"incorrect":""} ${r&&!d.locked&&!d.incorrect?"correct":""}`,children:d.value?d.value:null})},b))},l)):null})}),r?a(X,{difficulty:t,timer:N,attempts:n,accuracy:o}):a(Q,{difficulty:t,timer:N,attempts:n,accuracy:o}),h("div",{className:"game-btn-container",children:[a("button",{className:"btn back-btn",onClick:()=>c(),children:r?"Play Again":"Back"}),r?null:a("button",{className:"btn try-solution-btn",onClick:()=>s(i),disabled:r,children:"Try Solution"})]})]})},ee=()=>{const{board:e,gameState:s}=f.exports.useContext(C);return h("div",{className:"App",children:[a("h2",{style:{marginBottom:"1rem"},children:"TAP SUDOKU"}),s==="IN_SELECT_DIFFICULTY"?a(J,{}):null,e.length?a(Z,{}):null]})};G.render(a(P.StrictMode,{children:a(W,{children:a(ee,{})})}),document.getElementById("root"));

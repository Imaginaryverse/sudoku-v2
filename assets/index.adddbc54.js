var J=Object.defineProperty,X=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var P=(e,t,s)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,_=(e,t)=>{for(var s in t||(t={}))ee.call(t,s)&&P(e,s,t[s]);if(O)for(var s of O(t))te.call(t,s)&&P(e,s,t[s]);return e},Y=(e,t)=>X(e,Z(t));import{j,r as f,R as re,a as se}from"./vendor.1530fac7.js";const ne=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}};ne();function F(e){return[...e].sort(()=>Math.random()-.5)}function oe(e,t,s,o){const r=[...e][t],n=e.map(C=>C[s]),l=[],a=t-t%3,h=s-s%3;for(let C=a;C<a+3;C++)for(let p=h;p<h+3;p++)l.push(e[C][p]);const k=o!==void 0?[...r.concat(n,l).filter(C=>C!==o&&C!==0)]:[...r.concat(n,l).filter(C=>C!==0)];return[1,2,3,4,5,6,7,8,9].filter(C=>!k.includes(C))}function le(e,t){return Math.floor(Math.random()*(t-e)+e)}const ce=9;function G(e,t,s,o){for(let a=0;a<e.length;a++)if(e[t][a]==o)return!1;for(let a=0;a<e.length;a++)if(e[a][s]==o)return!1;const r=Math.floor(Math.sqrt(e.length)),n=t-t%r,l=s-s%r;for(let a=n;a<n+r;a++)for(let h=l;h<l+r;h++)if(e[a][h]==o)return!1;return!0}function V(e,t){let s=-1,o=-1,r=!0;for(let n=0;n<t;n++)for(let l=0;l<t;l++){if(e[n][l]===0){s=n,o=l,r=!1;break}if(!r)break}if(r)return!0;for(let n=1;n<=t;n++)if(G(e,s,o,n)){if(e[s][o]=n,V(e,t))return!0;e[s][o]=0}return!1}function q(e){const t=Math.floor(Math.random()*81),s=Math.floor(t/9),o=t%9,r=F(oe(e,s,o));if(!r.length)q(e);else for(let n=0;n<r.length;n++)if(G(e,s,o,r[n])){e[s][o]=r[n];return}}function ae(){const e=[F([1,2,3,4,5,6,7,8,9]),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0)];for(let t=0;t<19;t++)try{q(e)}catch(s){return console.log(s),e}return e}function U(){const e=ae();if(V(e,ce))return[...e];throw new Error("Could not generate board...")}function ie(e){return e.map(s=>s.map(o=>({value:o,candidates:[],isLocked:!0,isCorrect:!0,showCorrectness:!1,isHighlighted:!1})))}function ue(e,t){const s=[];return e.forEach((o,r)=>{o.forEach((n,l)=>{e[r][l].value===t&&s.push({bR:r,bC:l})})}),s}function fe(e,t){const s=[...e],o=[1,1,1,1,1,1,1,1,1];let r=o.reduce((n,l)=>n+l);for(;r<t;){const n=le(0,9);o[n]<7&&(o[n]++,r++)}return o.forEach((n,l)=>{const a=F(ue(e,l+1));for(let h=0;h<n;h++)s[a[h].bR][a[h].bC].value=0,s[a[h].bR][a[h].bC].isLocked=!1,s[a[h].bR][a[h].bC].isCorrect=!1}),s}const c=j.exports.jsx,S=j.exports.jsxs,I=f.exports.createContext(null),de=({children:e})=>{const[t,s]=f.exports.useState("IN_SELECT_DIFFICULTY"),[o,r]=f.exports.useState("normal"),[n,l]=f.exports.useState(40),[a,h]=f.exports.useState([]),[k,C]=f.exports.useState(""),[p,y]=f.exports.useState([]),[x,w]=f.exports.useState(0),[$,A]=f.exports.useState(0),[H,L]=f.exports.useState(0),[B,R]=f.exports.useState(!1);function T(v){switch(v){case"very easy":l(16);break;case"easy":l(26);break;case"normal":l(36);break;case"hard":l(46);break;case"very hard":l(56);break;default:l(36);break}return r(v)}function M(){h(U())}function D(v){let u=0;return v.forEach(i=>i.forEach(g=>{g.value||u++})),u}function m(v){const u=ie([...v]),i=fe(u,n);let g=D(i);l(g),y(i)}function N(v){w(i=>i+=1);const u=[...v];for(let i in u)for(let g in u[i])u[i][g].isLocked||(u[i][g].showCorrectness=!0,u[i][g].value!==a[i][g]?(u[i][g].isCorrect=!1,A(E=>E+=1)):u[i][g].isCorrect=!0);u.every((i,g)=>i.every((E,z)=>E.value===a[g][z]))&&R(!0),y(u)}function d(v,u,i){const g=u*v,E=i/g*100;L(100-E)}function b(){h([]),y([]),T("normal"),w(0),L(0),A(0),R(!1)}return f.exports.useEffect(()=>{switch(t){case"IN_SELECT_DIFFICULTY":{b();break}case"IN_GAME":const v=performance.now();let u=!1,i=1;for(;!u&&i<10;)try{const g=U(),E=performance.now();C((E-v).toPrecision(3)),console.log(`Success on attempt ${i}`),h(g),m(g),u=!0}catch(g){i++}break}},[t]),f.exports.useEffect(()=>{x&&d(x,n,$)},[x]),c(I.Provider,{value:{gameState:t,setGameState:s,difficulty:o,selectDifficulty:T,board:p,generationTime:k,generateSolvedBoard:M,checkCorrectness:N,attempts:x,isCorrectSolution:B,accuracy:H,numOfHoles:n},children:e})},he=[{name:"VERY EASY",value:"very easy"},{name:"EASY",value:"easy"},{name:"NORMAL",value:"normal"},{name:"HARD",value:"hard"},{name:"VERY HARD",value:"very hard"}],me=()=>{const{difficulty:e,selectDifficulty:t,setGameState:s}=f.exports.useContext(I);return S("div",{className:"select-difficulty-screen",children:[c("h4",{children:"Select difficulty:"}),c("div",{className:"difficulty-btn-container",children:he.map((o,r)=>c("button",{className:`btn difficulty-btn ${e===o.value?"selected":""}`,onClick:()=>t(o.value),children:o.name},r))}),c("button",{className:"btn start-btn",onClick:()=>s("IN_GAME"),children:"START"})]})};function W(e){const t=Math.floor(e/60/60),s=Math.floor(e/60)%60,o=Math.floor(e-s*60);let r="";return r+=t?`${t}h `:"",r+=s?`${s}min `:"",r+=`${o}s`,r}function K(e){return Intl.NumberFormat("en-GB",{style:"percent",maximumFractionDigits:2}).format(e/100)}const pe=({generationTime:e,difficulty:t,timer:s,numOfFilled:o,numOfHoles:r,attempts:n,accuracy:l})=>S("div",{className:"info-screen",children:[S("p",{className:"info",children:[c("b",{children:"Difficulty"}),": ",c("span",{className:"info-difficulty",children:t})]}),S("p",{className:"info",children:[c("b",{children:"Filled cells"}),": ",o," of ",r]}),S("p",{className:"info",children:[c("b",{children:"Elapsed time"}),": ",W(s)]}),S("p",{className:"info",children:[c("b",{children:"Number of attempts"}),": ",n]}),S("p",{className:"info",children:[c("b",{children:"Accuracy"}),": ",n?K(l):"No attempts"]}),S("p",{className:"generation-time",children:["This board was generated in ",c("b",{children:e})," ms"]})]}),be=({difficulty:e,timer:t,attempts:s,accuracy:o})=>S("div",{className:"result-screen",children:[c("h3",{className:"result-title",children:"WELL DONE!"}),S("p",{className:"result-info",children:["You completed this ",c("b",{children:e})," board"]}),S("p",{className:"result-info",children:["with ",c("b",{children:K(o)})," accuracy in"," ",S("b",{children:[s," ",s>1?"attempts":"attempt"]}),"."]}),S("p",{className:"result-info",children:["The game lasted for ",c("b",{children:W(t)})]})]}),Q=[1,2,3,4,5,6,7,8,9],ge=({value:e,candidates:t,rowIndex:s,colIndex:o,onClose:r,onCellChange:n})=>{const[l,a]=f.exports.useState(e),[h,k]=f.exports.useState(t);function C(y){k(x=>x.includes(y)?x.filter(w=>w!==y):[...x,y])}function p(){a(0),k([])}return f.exports.useEffect(()=>{n(l,h,s,o)},[l,h]),f.exports.useEffect(()=>{a(e),k(t)},[s,o]),S("div",{className:"cell-editor",children:[S("div",{className:"editor-btn-container",children:[c("button",{className:"btn close-btn",onClick:()=>r(),children:"Close"}),c("button",{className:"btn reset-btn",onClick:()=>p(),children:"Reset"})]}),c("ul",{className:"cell-value-list",children:Q.map((y,x)=>c("button",{className:`btn val-btn ${y===l?"selected":""}`,onClick:()=>a(y===l?0:y),children:y},x))}),c("div",{className:"candidates-row",children:c("ul",{className:"cell-candidates-list",children:Q.map((y,x)=>c("button",{className:`btn candidate-btn ${h.includes(y)?"selected":""}`,onClick:()=>C(y),children:y},x))})})]})},Ce=()=>{const{board:e,generationTime:t,checkCorrectness:s,attempts:o,isCorrectSolution:r,difficulty:n,accuracy:l,numOfHoles:a,setGameState:h}=f.exports.useContext(I),[k,C]=f.exports.useState([]),[p,y]=f.exports.useState(null),[x,w]=f.exports.useState(0),[$,A]=f.exports.useState(0),[H,L]=f.exports.useState(!0);function B(m){return m.map(d=>d.map(b=>Y(_({},b),{isHighlighted:!1})))}function R(m,N){C(d=>{const b=B(d);b[m].forEach(i=>i.isHighlighted=!0),b.forEach(i=>i[N].isHighlighted=!0);const v=m-m%3,u=N-N%3;for(let i=v;i<v+3;i++)for(let g=u;g<u+3;g++)b[i][g].isHighlighted=!0;return b[m][N].isHighlighted=!1,b})}function T(m,N,d,b){R(d,b),y({value:m,candidates:N,rowIndex:d,colIndex:b})}function M(){y(null),C(m=>B(m))}function D(m,N,d,b){C(v=>{const u=[...v];return u[d][b].value=m,u[d][b].candidates=N,u[d][b].showCorrectness=!1,u[d][b].isCorrect=!1,u})}return f.exports.useEffect(()=>{let m;return r?clearInterval(m):m=setInterval(()=>{w(N=>N+=1)},1e3),()=>clearInterval(m)},[r]),f.exports.useEffect(()=>{let m=0;k.forEach(N=>{N.forEach(d=>{!d.isLocked&&d.value&&(m+=1)})}),A(m),L(m===a)},[k]),f.exports.useEffect(()=>{C([...e])},[e]),S("div",{className:"sudoku-game-screen",children:[c("table",{className:"sudoku-board",cellPadding:"0",cellSpacing:"0",children:k.length?c("tbody",{children:k.map((m,N)=>c("tr",{className:"board-row",children:m.map((d,b)=>c("td",{className:`board-cell ${d.isLocked?"locked":""} ${r?"done":""} ${N===(p==null?void 0:p.rowIndex)&&b===p.colIndex?"selected":""} ${d.isHighlighted?"highlight":""}`,onClick:d.isLocked?void 0:()=>(p==null?void 0:p.rowIndex)===N&&p.colIndex===b?M():T(d.value,d.candidates,N,b),children:c("p",{className:`cell-value ${!d.isLocked&&d.showCorrectness?d.isCorrect?"correct":"incorrect":""}`,children:d.value?d.value:null})},b))},N))}):null}),S("div",{className:"bottom-container",children:[c("div",{className:`info-wrapper ${p?"":"open"}`,children:r?c(be,{difficulty:n,timer:x,attempts:o,accuracy:l}):c(pe,{generationTime:t,difficulty:n,timer:x,numOfFilled:$,numOfHoles:a,attempts:o,accuracy:l})}),c("div",{className:`cell-editor-wrapper ${p?"open":""}`,children:p&&c(ge,{value:p.value,candidates:p.candidates,rowIndex:p.rowIndex,colIndex:p.colIndex,onClose:M,onCellChange:D})})]}),S("div",{className:"game-btn-container",children:[c("button",{className:`btn ${r?"play-again-btn":"quit-btn"}`,onClick:()=>h("IN_SELECT_DIFFICULTY"),children:r?"Play Again":"Quit"}),!r&&c("button",{className:"btn try-solution-btn",onClick:()=>s(k),disabled:r||!H,children:"Try Solution"})]})]})},Ne=()=>{const{board:e,gameState:t}=f.exports.useContext(I);return S("div",{className:"App",children:[t==="IN_SELECT_DIFFICULTY"?c(me,{}):null,e.length?c(Ce,{}):null]})};re.render(c(se.StrictMode,{children:c(de,{children:c(Ne,{})})}),document.getElementById("root"));

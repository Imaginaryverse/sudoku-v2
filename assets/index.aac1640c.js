var J=Object.defineProperty,X=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var P=(e,t,s)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,_=(e,t)=>{for(var s in t||(t={}))ee.call(t,s)&&P(e,s,t[s]);if(O)for(var s of O(t))te.call(t,s)&&P(e,s,t[s]);return e},Y=(e,t)=>X(e,Z(t));import{j,r as f,R as re,a as se}from"./vendor.1530fac7.js";const ne=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}};ne();function F(e){return[...e].sort(()=>Math.random()-.5)}function oe(e,t,s,o){const r=[...e][t],n=e.map(C=>C[s]),c=[],a=t-t%3,h=s-s%3;for(let C=a;C<a+3;C++)for(let p=h;p<h+3;p++)c.push(e[C][p]);const k=o!==void 0?[...r.concat(n,c).filter(C=>C!==o&&C!==0)]:[...r.concat(n,c).filter(C=>C!==0)];return[1,2,3,4,5,6,7,8,9].filter(C=>!k.includes(C))}function le(e,t){return Math.floor(Math.random()*(t-e)+e)}const ce=9;function G(e,t,s,o){for(let a=0;a<e.length;a++)if(e[t][a]==o)return!1;for(let a=0;a<e.length;a++)if(e[a][s]==o)return!1;const r=Math.floor(Math.sqrt(e.length)),n=t-t%r,c=s-s%r;for(let a=n;a<n+r;a++)for(let h=c;h<c+r;h++)if(e[a][h]==o)return!1;return!0}function V(e,t){let s=-1,o=-1,r=!0;for(let n=0;n<t;n++)for(let c=0;c<t;c++){if(e[n][c]===0){s=n,o=c,r=!1;break}if(!r)break}if(r)return!0;for(let n=1;n<=t;n++)if(G(e,s,o,n)){if(e[s][o]=n,V(e,t))return!0;e[s][o]=0}return!1}function q(e){const t=Math.floor(Math.random()*81),s=Math.floor(t/9),o=t%9,r=F(oe(e,s,o));if(!r.length)q(e);else for(let n=0;n<r.length;n++)if(G(e,s,o,r[n])){e[s][o]=r[n];return}}function ae(){const e=[F([1,2,3,4,5,6,7,8,9]),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0)];for(let t=0;t<19;t++)try{q(e)}catch(s){return console.log(s),e}return e}function U(){const e=ae();if(V(e,ce))return[...e];throw new Error("Could not generate board...")}function ie(e){return e.map(s=>s.map(o=>({value:o,candidates:[],isLocked:!0,isCorrect:!0,showCorrectness:!1,isHighlighted:!1})))}function ue(e,t){const s=[];return e.forEach((o,r)=>{o.forEach((n,c)=>{e[r][c].value===t&&s.push({bR:r,bC:c})})}),s}function fe(e,t){const s=[...e],o=[1,1,1,1,1,1,1,1,1];let r=o.reduce((n,c)=>n+c);for(;r<t;){const n=le(0,9);o[n]<7&&(o[n]++,r++)}return o.forEach((n,c)=>{const a=F(ue(e,c+1));for(let h=0;h<n;h++)s[a[h].bR][a[h].bC].value=0,s[a[h].bR][a[h].bC].isLocked=!1,s[a[h].bR][a[h].bC].isCorrect=!1}),s}const l=j.exports.jsx,S=j.exports.jsxs,I=f.exports.createContext(null),de=({children:e})=>{const[t,s]=f.exports.useState("IN_SELECT_DIFFICULTY"),[o,r]=f.exports.useState("normal"),[n,c]=f.exports.useState(40),[a,h]=f.exports.useState([]),[k,C]=f.exports.useState(""),[p,N]=f.exports.useState([]),[x,w]=f.exports.useState(0),[$,A]=f.exports.useState(0),[H,L]=f.exports.useState(0),[B,R]=f.exports.useState(!1);function T(v){switch(v){case"very easy":c(16);break;case"easy":c(26);break;case"normal":c(36);break;case"hard":c(46);break;case"very hard":c(56);break;default:c(36);break}return r(v)}function M(){h(U())}function D(v){let u=0;return v.forEach(i=>i.forEach(b=>{b.value||u++})),u}function m(v){const u=ie([...v]),i=fe(u,n);let b=D(i);c(b),N(i)}function y(v){w(i=>i+=1);const u=[...v];for(let i in u)for(let b in u[i])u[i][b].isLocked||(u[i][b].showCorrectness=!0,u[i][b].value!==a[i][b]?(u[i][b].isCorrect=!1,A(E=>E+=1)):u[i][b].isCorrect=!0);u.every((i,b)=>i.every((E,Q)=>E.value===a[b][Q]))&&R(!0),N(u)}function d(v,u,i){const b=u*v,E=i/b*100;L(100-E)}function g(){h([]),N([]),T("normal"),w(0),L(0),A(0),R(!1)}return f.exports.useEffect(()=>{switch(t){case"IN_SELECT_DIFFICULTY":{g();break}case"IN_GAME":const v=performance.now();let u=!1,i=1;for(;!u&&i<10;)try{const b=U(),E=performance.now();C((E-v).toPrecision(3)),console.log(`Success on attempt ${i}`),h(b),m(b),u=!0}catch(b){i++}break}},[t]),f.exports.useEffect(()=>{x&&d(x,n,$)},[x]),l(I.Provider,{value:{gameState:t,setGameState:s,difficulty:o,selectDifficulty:T,board:p,generationTime:k,generateSolvedBoard:M,checkCorrectness:y,attempts:x,isCorrectSolution:B,accuracy:H,numOfHoles:n},children:e})},he=[{name:"VERY EASY",value:"very easy"},{name:"EASY",value:"easy"},{name:"NORMAL",value:"normal"},{name:"HARD",value:"hard"},{name:"VERY HARD",value:"very hard"}],me=()=>{const{difficulty:e,selectDifficulty:t,setGameState:s}=f.exports.useContext(I);return S("div",{className:"select-difficulty-screen",children:[l("h4",{children:"Select difficulty:"}),l("div",{className:"difficulty-btn-container",children:he.map((o,r)=>l("button",{className:`btn difficulty-btn ${e===o.value?"selected":""}`,onClick:()=>t(o.value),children:o.name},r))}),l("button",{className:"btn start-btn",onClick:()=>s("IN_GAME"),children:"START"}),l("p",{style:{marginTop:"1rem",fontSize:"9px",color:"rgba(255, 255, 255, 0.25)"},children:"version 1.0.1"})]})};function W(e){const t=Math.floor(e/60/60),s=Math.floor(e/60)%60,o=Math.floor(e-s*60);let r="";return r+=t?`${t}h `:"",r+=s?`${s}min `:"",r+=`${o}s`,r}function z(e){return Intl.NumberFormat("en-GB",{style:"percent",maximumFractionDigits:2}).format(e/100)}const pe=({generationTime:e,difficulty:t,timer:s,numOfFilled:o,numOfHoles:r,attempts:n,accuracy:c})=>S("div",{className:"info-screen",children:[S("p",{className:"info",children:[l("b",{children:"Difficulty"}),": ",l("span",{className:"info-difficulty",children:t})]}),S("p",{className:"info",children:[l("b",{children:"Filled cells"}),": ",o," of ",r]}),S("p",{className:"info",children:[l("b",{children:"Elapsed time"}),": ",W(s)]}),S("p",{className:"info",children:[l("b",{children:"Number of attempts"}),": ",n]}),S("p",{className:"info",children:[l("b",{children:"Accuracy"}),": ",n?z(c):"No attempts"]}),S("p",{className:"generation-time",children:["This board was generated in ",l("b",{children:e})," ms"]})]}),ge=({difficulty:e,timer:t,attempts:s,accuracy:o})=>S("div",{className:"result-screen",children:[l("h3",{className:"result-title",children:"WELL DONE!"}),S("p",{className:"result-info",children:["You completed this ",l("b",{children:e})," board"]}),S("p",{className:"result-info",children:["with ",l("b",{children:z(o)})," accuracy in"," ",S("b",{children:[s," ",s>1?"attempts":"attempt"]}),"."]}),S("p",{className:"result-info",children:["The game lasted for ",l("b",{children:W(t)})]})]}),K=[1,2,3,4,5,6,7,8,9],be=({value:e,candidates:t,rowIndex:s,colIndex:o,onClose:r,onCellChange:n})=>{const[c,a]=f.exports.useState(e),[h,k]=f.exports.useState(t);function C(N){k(x=>x.includes(N)?x.filter(w=>w!==N):[...x,N])}function p(){a(0),k([])}return f.exports.useEffect(()=>{n(c,h,s,o)},[c,h]),f.exports.useEffect(()=>{a(e),k(t)},[s,o]),S("div",{className:"cell-editor",children:[S("div",{className:"editor-btn-container",children:[l("button",{className:"btn close-btn",onClick:()=>r(),children:"Close"}),l("button",{className:"btn reset-btn",onClick:()=>p(),children:"Reset"})]}),l("ul",{className:"cell-value-list",children:K.map((N,x)=>l("button",{className:`btn val-btn ${N===c?"selected":""}`,onClick:()=>a(N===c?0:N),children:N},x))}),l("div",{className:"candidates-row",children:l("ul",{className:"cell-candidates-list",children:K.map((N,x)=>l("button",{className:`btn candidate-btn ${h.includes(N)?"selected":""}`,onClick:()=>C(N),children:N},x))})})]})},Ce=()=>{const{board:e,generationTime:t,checkCorrectness:s,attempts:o,isCorrectSolution:r,difficulty:n,accuracy:c,numOfHoles:a,setGameState:h}=f.exports.useContext(I),[k,C]=f.exports.useState([]),[p,N]=f.exports.useState(null),[x,w]=f.exports.useState(0),[$,A]=f.exports.useState(0),[H,L]=f.exports.useState(!0);function B(m){return m.map(d=>d.map(g=>Y(_({},g),{isHighlighted:!1})))}function R(m,y){C(d=>{const g=B(d);g[m].forEach(i=>i.isHighlighted=!0),g.forEach(i=>i[y].isHighlighted=!0);const v=m-m%3,u=y-y%3;for(let i=v;i<v+3;i++)for(let b=u;b<u+3;b++)g[i][b].isHighlighted=!0;return g[m][y].isHighlighted=!1,g})}function T(m,y,d,g){R(d,g),N({value:m,candidates:y,rowIndex:d,colIndex:g})}function M(){N(null),C(m=>B(m))}function D(m,y,d,g){C(v=>{const u=[...v];return u[d][g].value=m,u[d][g].candidates=y,u[d][g].showCorrectness=!1,u[d][g].isCorrect=!1,u})}return f.exports.useEffect(()=>{let m;return r?clearInterval(m):m=setInterval(()=>{w(y=>y+=1)},1e3),()=>clearInterval(m)},[r]),f.exports.useEffect(()=>{let m=0;k.forEach(y=>{y.forEach(d=>{!d.isLocked&&d.value&&(m+=1)})}),A(m),L(m===a)},[k]),f.exports.useEffect(()=>{C([...e])},[e]),S("div",{className:"sudoku-game-screen",children:[l("table",{className:"sudoku-board",cellPadding:"0",cellSpacing:"0",children:k.length?l("tbody",{children:k.map((m,y)=>l("tr",{className:"board-row",children:m.map((d,g)=>l("td",{className:`board-cell ${d.isLocked?"locked":""} ${r?"done":""} ${y===(p==null?void 0:p.rowIndex)&&g===p.colIndex?"selected":""} ${d.isHighlighted?"highlight":""}`,onClick:d.isLocked?void 0:()=>(p==null?void 0:p.rowIndex)===y&&p.colIndex===g?M():T(d.value,d.candidates,y,g),children:l("p",{className:`cell-value ${!d.isLocked&&d.showCorrectness?d.isCorrect?"correct":"incorrect":""}`,children:d.value?d.value:null})},g))},y))}):null}),S("div",{className:"bottom-container",children:[l("div",{className:`info-wrapper ${p?"":"open"}`,children:r?l(ge,{difficulty:n,timer:x,attempts:o,accuracy:c}):l(pe,{generationTime:t,difficulty:n,timer:x,numOfFilled:$,numOfHoles:a,attempts:o,accuracy:c})}),l("div",{className:`cell-editor-wrapper ${p?"open":""}`,children:p&&l(be,{value:p.value,candidates:p.candidates,rowIndex:p.rowIndex,colIndex:p.colIndex,onClose:M,onCellChange:D})})]}),S("div",{className:"game-btn-container",children:[l("button",{className:`btn ${r?"play-again-btn":"quit-btn"}`,onClick:()=>h("IN_SELECT_DIFFICULTY"),children:r?"Play Again":"Quit"}),!r&&l("button",{className:"btn try-solution-btn",onClick:()=>s(k),disabled:r||!H,children:"Try Solution"})]})]})},ye=()=>{const{board:e,gameState:t}=f.exports.useContext(I);return S("div",{className:"App",children:[t==="IN_SELECT_DIFFICULTY"?l(me,{}):null,e.length?l(Ce,{}):null]})};re.render(l(se.StrictMode,{children:l(de,{children:l(ye,{})})}),document.getElementById("root"));

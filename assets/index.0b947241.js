var W=Object.defineProperty,z=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var H=(e,t,r)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t)=>{for(var r in t||(t={}))X.call(t,r)&&H(e,r,t[r]);if(F)for(var r of F(t))Z.call(t,r)&&H(e,r,t[r]);return e},_=(e,t)=>z(e,J(t));import{j as P,r as u,R as ee,a as te}from"./vendor.1530fac7.js";const re=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}};re();function se(e){return[...e].sort(()=>Math.random()-.5)}function ne(e,t){return Math.floor(Math.random()*(t-e)+e)}const oe=9;function Y(e,t,r,a){for(let m=0;m<e.length;m++)if(e[t][m]==a)return!1;for(let m=0;m<e.length;m++)if(e[m][r]==a)return!1;const s=Math.floor(Math.sqrt(e.length)),n=t-t%s,l=r-r%s;for(let m=n;m<n+s;m++)for(let v=l;v<l+s;v++)if(e[m][v]==a)return!1;return!0}function j(e,t){let r=-1,a=-1,s=!0;for(let n=0;n<t;n++)for(let l=0;l<t;l++){if(e[n][l]===0){r=n,a=l,s=!1;break}if(!s)break}if(s)return!0;for(let n=1;n<=t;n++)if(Y(e,r,a,n)){if(e[r][a]=n,j(e,t))return!0;e[r][a]=0}return!1}function G(e,t,r){if(performance.now()-r>7.5)throw new Error("ERROR! Timeout limit exceeded");const s=Math.floor(Math.random()*81),n=Math.floor(s/9),l=s%9;if(Y(e,n,l,t)){e[n][l]=t;return}else G(e,t,r)}function ae(){const e=[se([1,2,3,4,5,6,7,8,9]),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0)],t=performance.now();for(let r=0;r<9;r++)try{const a=ne(1,10);G(e,a,t)}catch(a){return console.log(a),e}return e}function q(){const e=ae();if(j(e,oe))return[...e];throw new Error("Could not generate board...")}function le(e){return e.map(r=>r.map(a=>({value:a,candidates:[],isLocked:!0,isCorrect:!0,showCorrectness:!1,isHighlighted:!1})))}function ce(e,t){const r=[...e];let a=0;for(;a<t;){const s=Math.floor(Math.random()*81),n=Math.floor(s/9),l=s%9;r[n][l].value!==0&&(r[n][l].value=0,r[n][l].isLocked=!1,r[n][l].isCorrect=!1,a++)}return r}const o=P.exports.jsx,C=P.exports.jsxs,R=u.exports.createContext(null),ie=({children:e})=>{const[t,r]=u.exports.useState("IN_SELECT_DIFFICULTY"),[a,s]=u.exports.useState("normal"),[n,l]=u.exports.useState(40),[m,v]=u.exports.useState([]),[S,k]=u.exports.useState(""),[b,g]=u.exports.useState([]),[N,E]=u.exports.useState(0),[T,w]=u.exports.useState(0),[I,A]=u.exports.useState(0),[L,B]=u.exports.useState(!1);function $(c){switch(c){case"very easy":l(15);break;case"easy":l(25);break;case"normal":l(40);break;case"hard":l(55);break;case"very hard":l(64);break;default:l(40);break}return s(c)}function M(){v(q())}function D(c){const y=performance.now(),d=le([...c]),p=performance.now();k((p-y).toPrecision(3));const x=ce(d,n);g(x)}function f(c){E(d=>d+=1);const y=[...c];for(let d in y)for(let p in y[d])y[d][p].isLocked||(y[d][p].showCorrectness=!0,y[d][p].value!==m[d][p]?(y[d][p].isCorrect=!1,w(x=>x+=1)):y[d][p].isCorrect=!0);y.every((d,p)=>d.every((x,Q)=>x.value===m[p][Q]))&&B(!0),g(y)}function h(c,y,d){const p=y*c,x=d/p*100;A(100-x)}function i(){v([]),g([]),E(0),A(0),w(0),B(!1)}return u.exports.useEffect(()=>{switch(t){case"IN_SELECT_DIFFICULTY":{i();break}case"IN_GAME":const c=q();v(c),D(c);break}},[t]),u.exports.useEffect(()=>{N&&h(N,n,T)},[N]),o(R.Provider,{value:{gameState:t,setGameState:r,difficulty:a,selectDifficulty:$,board:b,generationTime:S,generateSolvedBoard:M,checkCorrectness:f,attempts:N,isCorrectSolution:L,accuracy:I,numOfHoles:n},children:e})},ue=[{name:"VERY EASY",value:"very easy"},{name:"EASY",value:"easy"},{name:"NORMAL",value:"normal"},{name:"HARD",value:"hard"},{name:"VERY HARD",value:"very hard"}],de=()=>{const{difficulty:e,selectDifficulty:t,setGameState:r}=u.exports.useContext(R);return C("div",{className:"select-difficulty-screen",children:[o("h4",{children:"Select difficulty:"}),o("div",{className:"difficulty-btn-container",children:ue.map((a,s)=>o("button",{className:`btn difficulty-btn ${e===a.value?"selected":""}`,onClick:()=>t(a.value),children:a.name},s))}),o("button",{className:"btn start-btn",onClick:()=>r("IN_GAME"),children:"START"})]})};function U(e){const t=Math.floor(e/60/60),r=Math.floor(e/60)%60,a=Math.floor(e-r*60);let s="";return s+=t?`${t}h `:"",s+=r?`${r}min `:"",s+=`${a}s`,s}function V(e){return Intl.NumberFormat("en-GB",{style:"percent",maximumFractionDigits:2}).format(e/100)}const fe=({generationTime:e,difficulty:t,timer:r,numOfFilled:a,numOfHoles:s,attempts:n,accuracy:l})=>C("div",{className:"info-screen",children:[C("p",{className:"info",children:[o("b",{children:"Difficulty"}),": ",o("span",{className:"info-difficulty",children:t})]}),C("p",{className:"info",children:[o("b",{children:"Filled cells"}),": ",a," of ",s]}),C("p",{className:"info",children:[o("b",{children:"Elapsed time"}),": ",U(r)]}),C("p",{className:"info",children:[o("b",{children:"Number of attempts"}),": ",n]}),C("p",{className:"info",children:[o("b",{children:"Accuracy"}),": ",n?V(l):"No attempts"]}),C("p",{className:"generation-time",children:["This board was generated in ",o("b",{children:e})," ms"]})]}),he=({difficulty:e,timer:t,attempts:r,accuracy:a})=>C("div",{className:"result-screen",children:[o("h3",{className:"result-title",children:"WELL DONE!"}),C("p",{className:"result-info",children:["You completed this ",o("b",{children:e})," board"]}),C("p",{className:"result-info",children:["with ",o("b",{children:V(a)})," accuracy in"," ",C("b",{children:[r," ",r>1?"attempts":"attempt"]}),"."]}),C("p",{className:"result-info",children:["The game lasted for ",o("b",{children:U(t)})]})]}),K=[1,2,3,4,5,6,7,8,9],me=({value:e,candidates:t,rowIndex:r,colIndex:a,onClose:s,onCellChange:n})=>{const[l,m]=u.exports.useState(e),[v,S]=u.exports.useState(t);function k(g){S(N=>N.includes(g)?N.filter(E=>E!==g):[...N,g])}function b(){m(0),S([])}return u.exports.useEffect(()=>{n(l,v,r,a)},[l,v]),u.exports.useEffect(()=>{m(e),S(t)},[r,a]),C("div",{className:"cell-editor",children:[C("div",{className:"editor-btn-container",children:[o("button",{className:"btn close-btn",onClick:()=>s(),children:"Close"}),o("button",{className:"btn reset-btn",onClick:()=>b(),children:"Reset"})]}),o("ul",{className:"cell-value-list",children:K.map((g,N)=>o("button",{className:`btn val-btn ${g===l?"selected":""}`,onClick:()=>m(g===l?0:g),children:g},N))}),o("div",{className:"candidates-row",children:o("ul",{className:"cell-candidates-list",children:K.map((g,N)=>o("button",{className:`btn candidate-btn ${v.includes(g)?"selected":""}`,onClick:()=>k(g),children:g},N))})})]})},pe=()=>{const{board:e,generationTime:t,checkCorrectness:r,attempts:a,isCorrectSolution:s,difficulty:n,accuracy:l,numOfHoles:m,setGameState:v}=u.exports.useContext(R),[S,k]=u.exports.useState([]),[b,g]=u.exports.useState(null),[N,E]=u.exports.useState(0),[T,w]=u.exports.useState(0),[I,A]=u.exports.useState(!0);function L(f){return f.map(i=>i.map(c=>_(O({},c),{isHighlighted:!1})))}function B(f,h){k(i=>{const c=L(i);c[f].forEach(p=>p.isHighlighted=!0),c.forEach(p=>p[h].isHighlighted=!0);const y=f-f%3,d=h-h%3;for(let p=y;p<y+3;p++)for(let x=d;x<d+3;x++)c[p][x].isHighlighted=!0;return c[f][h].isHighlighted=!1,c})}function $(f,h,i,c){B(i,c),g({value:f,candidates:h,rowIndex:i,colIndex:c})}function M(){g(null),k(f=>L(f))}function D(f,h,i,c){k(y=>{const d=[...y];return d[i][c].value=f,d[i][c].candidates=h,d[i][c].showCorrectness=!1,d[i][c].isCorrect=!1,d})}return u.exports.useEffect(()=>{let f;return s?clearInterval(f):f=setInterval(()=>{E(h=>h+=1)},1e3),()=>clearInterval(f)},[s]),u.exports.useEffect(()=>{let f=0;S.forEach(h=>{h.forEach(i=>{!i.isLocked&&i.value&&(f+=1)})}),w(f),A(S.some(h=>h.some(i=>i.value===0)))},[S]),u.exports.useEffect(()=>{k([...e])},[e]),C("div",{className:"sudoku-game-screen",children:[o("table",{className:"sudoku-board",cellPadding:"0",cellSpacing:"0",children:S.length?o("tbody",{children:S.map((f,h)=>o("tr",{className:"board-row",children:f.map((i,c)=>o("td",{className:`board-cell ${i.isLocked?"locked":""} ${s?"done":""} ${h===(b==null?void 0:b.rowIndex)&&c===b.colIndex?"selected":""} ${i.isHighlighted?"highlight":""}`,onClick:i.isLocked?void 0:()=>(b==null?void 0:b.rowIndex)===h&&b.colIndex===c?M():$(i.value,i.candidates,h,c),children:o("p",{className:`cell-value ${!i.isLocked&&i.showCorrectness?i.isCorrect?"correct":"incorrect":""}`,children:i.value?i.value:null})},c))},h))}):null}),C("div",{className:"bottom-container",children:[o("div",{className:`info-wrapper ${b?"":"open"}`,children:s?o(he,{difficulty:n,timer:N,attempts:a,accuracy:l}):o(fe,{generationTime:t,difficulty:n,timer:N,numOfFilled:T,numOfHoles:m,attempts:a,accuracy:l})}),o("div",{className:`cell-editor-wrapper ${b?"open":""}`,children:b&&o(me,{value:b.value,candidates:b.candidates,rowIndex:b.rowIndex,colIndex:b.colIndex,onClose:M,onCellChange:D})})]}),C("div",{className:"game-btn-container",children:[o("button",{className:`btn ${s?"play-again-btn":"quit-btn"}`,onClick:()=>v("IN_SELECT_DIFFICULTY"),children:s?"Play Again":"Quit"}),!s&&o("button",{className:"btn try-solution-btn",onClick:()=>r(S),disabled:s||I,children:"Try Solution"})]})]})},be=()=>{const{board:e,gameState:t}=u.exports.useContext(R);return C("div",{className:"App",children:[t==="IN_SELECT_DIFFICULTY"?o(de,{}):null,e.length?o(pe,{}):null]})};ee.render(o(te.StrictMode,{children:o(ie,{children:o(be,{})})}),document.getElementById("root"));

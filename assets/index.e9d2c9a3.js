import{j as I,r as l,R as P,a as Y}from"./vendor.1530fac7.js";const G=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};G();function U(e){return[...e].sort(()=>Math.random()-.5)}const H=9;function q(e,o,n,t){for(let i=0;i<e.length;i++)if(e[o][i]==t)return!1;for(let i=0;i<e.length;i++)if(e[i][n]==t)return!1;const r=Math.floor(Math.sqrt(e.length)),s=o-o%r,c=n-n%r;for(let i=s;i<s+r;i++)for(let v=c;v<c+r;v++)if(e[i][v]==t)return!1;return!0}function M(e,o){let n=-1,t=-1,r=!0;for(let s=0;s<o;s++)for(let c=0;c<o;c++){if(e[s][c]===0){n=s,t=c,r=!1;break}if(!r)break}if(r)return!0;for(let s=1;s<=o;s++)if(q(e,n,t,s)){if(e[n][t]=s,M(e,o))return!0;e[n][t]=0}return!1}function L(){const e=[U([1,2,3,4,5,6,7,8,9]),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0)];if(M(e,H))return[...e];throw new Error("Could not generate board...")}function K(e){return e.map(n=>n.map(t=>({value:t,locked:t!==0,incorrect:!1})))}function V(e,o){const n=[...e];let t=0;for(;t<o;){const r=Math.floor(Math.random()*81),s=Math.floor(r/9),c=r%9;n[s][c].value!==0&&(n[s][c].value=0,n[s][c].locked=!1,t++)}return n}const a=I.exports.jsx,h=I.exports.jsxs,C=l.exports.createContext(null),W=({children:e})=>{const[o,n]=l.exports.useState("IN_SELECT_DIFFICULTY"),[t,r]=l.exports.useState("normal"),[s,c]=l.exports.useState(40),[i,v]=l.exports.useState([]),[k,N]=l.exports.useState([]),[b,x]=l.exports.useState(0),[E,f]=l.exports.useState(0),[d,u]=l.exports.useState(0),[A,B]=l.exports.useState(!1);function D(p){switch(p){case"very easy":c(15);break;case"easy":c(25);break;case"normal":c(40);break;case"hard":c(55);break;case"very hard":c(64);break;default:c(40);break}return r(p)}function R(){v(L())}function F(p){const y=K([...p]),m=V(y,s);N(m)}function _(p){x(m=>m+=1);const y=[...p];for(let m in y)for(let S in y[m])!y[m][S].locked&&y[m][S].value!==i[m][S]&&(y[m][S].incorrect=!0,f(g=>g+=1));y.every((m,S)=>m.every((g,$)=>g.value===i[S][$]))&&B(!0),N(y)}function j(p,y,m){const S=y*p,g=m/S*100;u(100-g)}function O(){v([]),N([]),x(0),u(0),f(0),B(!1)}return l.exports.useEffect(()=>{switch(o){case"IN_SELECT_DIFFICULTY":{O();break}case"IN_GAME":const p=L();v(p),F(p);break}},[o]),l.exports.useEffect(()=>{b&&j(b,s,E)},[b]),a(C.Provider,{value:{gameState:o,setGameState:n,difficulty:t,selectDifficulty:D,board:k,generateSolvedBoard:R,checkCorrectness:_,attempts:b,isCorrectSolution:A,accuracy:d},children:e})},z=[{name:"VERY EASY",value:"very easy"},{name:"EASY",value:"easy"},{name:"NORMAL",value:"normal"},{name:"HARD",value:"hard"},{name:"VERY HARD",value:"very hard"}],J=()=>{const{difficulty:e,selectDifficulty:o,setGameState:n}=l.exports.useContext(C);return h("div",{className:"select-difficulty-screen",children:[a("h4",{children:"Select difficulty:"}),a("div",{className:"difficulty-btn-container",children:z.map((t,r)=>a("button",{className:`btn difficulty-btn ${e===t.value?"selected":""}`,onClick:()=>o(t.value),children:t.name},r))}),a("button",{className:"btn start-btn",onClick:()=>n("IN_GAME"),children:"START"})]})};function w(e){const o=Math.floor(e/60/60),n=Math.floor(e/60)%60,t=Math.floor(e-n*60);let r="";return r+=o?`${o}h `:"",r+=n?`${n}min `:"",r+=`${t}s`,r}function T(e){return Intl.NumberFormat("en-GB",{style:"percent",maximumFractionDigits:2}).format(e/100)}const Q=({difficulty:e,timer:o,attempts:n,accuracy:t})=>h("div",{className:"info-screen",children:[h("p",{className:"info",children:[a("b",{children:"Difficulty"}),": ",a("span",{className:"info-difficulty",children:e})]}),h("p",{className:"info",children:[a("b",{children:"Elapsed time"}),": ",w(o)]}),h("p",{className:"info",children:[a("b",{children:"Number of attempts"}),": ",n]}),h("p",{className:"info",children:[a("b",{children:"Accuracy"}),": ",T(t)]})]}),X=({difficulty:e,timer:o,attempts:n,accuracy:t})=>h("div",{className:"result-screen",children:[a("h3",{className:"result-title",children:"Well done!"}),h("p",{className:"result-info",children:["In ",n<3?"just":""," ",h("b",{children:[n,n>1?" attempts":" attempt"]})," ","and ",a("b",{children:w(o)})," you completed a ",e," board with"," ",a("b",{children:T(t)})," accuracy!"]})]}),Z=()=>{const{board:e,checkCorrectness:o,attempts:n,isCorrectSolution:t,difficulty:r,accuracy:s,setGameState:c}=l.exports.useContext(C),[i,v]=l.exports.useState([]),[k,N]=l.exports.useState(0),[b,x]=l.exports.useState(!0);function E(f,d){if(t)return;const u=[...e];u[f][d].value===9?(u[f][d].value=0,u[f][d].incorrect=!1):(u[f][d].value++,u[f][d].incorrect=!1),v(u)}return l.exports.useEffect(()=>{let f;return t?clearInterval(f):f=setInterval(()=>{N(d=>d+=1)},1e3),()=>clearInterval(f)},[t]),l.exports.useEffect(()=>{x(i.some(f=>f.some(d=>d.value===0)))},[i]),l.exports.useEffect(()=>{v([...e])},[e]),h("div",{className:"sudoku-game-screen",children:[a("table",{className:"sudoku-board",cellPadding:"0",cellSpacing:"0",children:a("tbody",{children:i.length?i.map((f,d)=>a("tr",{className:"board-row",children:f.map((u,A)=>a("td",{className:`board-cell ${u.locked?"locked":""} ${t?"done":""}`,onClick:u.locked?void 0:()=>E(d,A),children:a("p",{className:`cell-value ${u.incorrect?"incorrect":""} ${t&&!u.locked&&!u.incorrect?"correct":""}`,children:u.value?u.value:null})},A))},d)):null})}),t?a(X,{difficulty:r,timer:k,attempts:n,accuracy:s}):a(Q,{difficulty:r,timer:k,attempts:n,accuracy:s}),h("div",{className:"game-btn-container",children:[a("button",{className:"btn back-btn",onClick:()=>c("IN_SELECT_DIFFICULTY"),children:t?"Play Again":"Back"}),t?null:a("button",{className:"btn try-solution-btn",onClick:()=>o(i),disabled:t||b,children:"Try Solution"})]})]})},ee=()=>{const{board:e,gameState:o}=l.exports.useContext(C);return h("div",{className:"App",children:[a("h2",{style:{marginBottom:"1rem"},children:"TAP SUDOKU"}),o==="IN_SELECT_DIFFICULTY"?a(J,{}):null,e.length?a(Z,{}):null]})};P.render(a(Y.StrictMode,{children:a(W,{children:a(ee,{})})}),document.getElementById("root"));

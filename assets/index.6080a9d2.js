import{j as B,r as l,R as P,a as Y}from"./vendor.1530fac7.js";const G=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}};G();function U(e){return[...e].sort(()=>Math.random()-.5)}const H=9;function q(e,s,n,t){for(let i=0;i<e.length;i++)if(e[s][i]==t)return!1;for(let i=0;i<e.length;i++)if(e[i][n]==t)return!1;const r=Math.floor(Math.sqrt(e.length)),o=s-s%r,c=n-n%r;for(let i=o;i<o+r;i++)for(let v=c;v<c+r;v++)if(e[i][v]==t)return!1;return!0}function M(e,s){let n=-1,t=-1,r=!0;for(let o=0;o<s;o++)for(let c=0;c<s;c++){if(e[o][c]===0){n=o,t=c,r=!1;break}if(!r)break}if(r)return!0;for(let o=1;o<=s;o++)if(q(e,n,t,o)){if(e[n][t]=o,M(e,s))return!0;e[n][t]=0}return!1}function I(){const e=[U([1,2,3,4,5,6,7,8,9]),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0),new Array(9).fill(0)];if(M(e,H))return[...e];throw new Error("Could not generate board...")}function K(e){return e.map(n=>n.map(t=>({value:t,locked:t!==0,incorrect:!1})))}function V(e,s){const n=[...e];let t=0;for(;t<s;){const r=Math.floor(Math.random()*81),o=Math.floor(r/9),c=r%9;n[o][c].value!==0&&(n[o][c].value=0,n[o][c].locked=!1,t++)}return n}const a=B.exports.jsx,h=B.exports.jsxs,A=l.exports.createContext(null),W=({children:e})=>{const[s,n]=l.exports.useState("IN_SELECT_DIFFICULTY"),[t,r]=l.exports.useState("normal"),[o,c]=l.exports.useState(40),[i,v]=l.exports.useState([]),[k,N]=l.exports.useState([]),[b,f]=l.exports.useState(0),[m,u]=l.exports.useState(0),[x,C]=l.exports.useState(0),[T,E]=l.exports.useState(!1);function D(p){switch(p){case"very easy":c(15);break;case"easy":c(25);break;case"normal":c(40);break;case"hard":c(55);break;case"very hard":c(64);break;default:c(40);break}return r(p)}function R(){v(I())}function F(p){const y=K([...p]),d=V(y,o);N(d)}function _(p){f(d=>d+=1);const y=[...p];for(let d in y)for(let S in y[d])!y[d][S].locked&&y[d][S].value!==i[d][S]&&(y[d][S].incorrect=!0,u(g=>g+=1));y.every((d,S)=>d.every((g,$)=>g.value===i[S][$]))&&E(!0),N(y)}function j(p,y,d){const S=y*p,g=d/S*100;C(100-g)}function O(){v([]),N([]),f(0),C(0),u(0),E(!1)}return l.exports.useEffect(()=>{switch(s){case"IN_SELECT_DIFFICULTY":{O();break}case"IN_GAME":const p=I();v(p),F(p);break}},[s]),l.exports.useEffect(()=>{b&&j(b,o,m)},[b]),a(A.Provider,{value:{gameState:s,setGameState:n,difficulty:t,selectDifficulty:D,board:k,generateSolvedBoard:R,checkCorrectness:_,attempts:b,isCorrectSolution:T,accuracy:x},children:e})},z=[{name:"VERY EASY",value:"very easy"},{name:"EASY",value:"easy"},{name:"NORMAL",value:"normal"},{name:"HARD",value:"hard"},{name:"VERY HARD",value:"very hard"}],J=()=>{const{difficulty:e,selectDifficulty:s,setGameState:n}=l.exports.useContext(A);return h("div",{className:"select-difficulty-screen",children:[a("h4",{children:"Select difficulty:"}),a("div",{className:"difficulty-btn-container",children:z.map((t,r)=>a("button",{className:`btn difficulty-btn ${e===t.value?"selected":""}`,onClick:()=>s(t.value),children:t.name},r))}),a("button",{className:"btn start-btn",onClick:()=>n("IN_GAME"),children:"START"})]})};function L(e){const s=Math.floor(e/60/60),n=Math.floor(e/60)%60,t=Math.floor(e-n*60);let r="";return r+=s?`${s}h `:"",r+=n?`${n}min `:"",r+=`${t}s`,r}function w(e){return Intl.NumberFormat("en-GB",{style:"percent",maximumFractionDigits:2}).format(e/100)}const Q=({difficulty:e,timer:s,attempts:n,accuracy:t})=>h("div",{className:"info-screen",children:[h("p",{className:"info",children:[a("b",{children:"Difficulty"}),": ",a("span",{className:"info-difficulty",children:e})]}),h("p",{className:"info",children:[a("b",{children:"Elapsed time"}),": ",L(s)]}),h("p",{className:"info",children:[a("b",{children:"Number of attempts"}),": ",n]}),h("p",{className:"info",children:[a("b",{children:"Accuracy"}),": ",w(t)]})]}),X=({difficulty:e,timer:s,attempts:n,accuracy:t})=>h("div",{className:"result-screen",children:[a("h3",{className:"result-title",children:"Well done!"}),h("p",{className:"result-info",children:["In ",n<3?"just":""," ",h("b",{children:[n,n>1?" attempts":" attempt"]})," ","and ",a("b",{children:L(s)})," you completed a ",e," board with"," ",a("b",{children:w(t)})," accuracy!"]})]}),Z=()=>{const{board:e,checkCorrectness:s,attempts:n,isCorrectSolution:t,difficulty:r,accuracy:o,setGameState:c}=l.exports.useContext(A),[i,v]=l.exports.useState([]),[k,N]=l.exports.useState(0);function b(f,m){if(t)return;const u=[...e];u[f][m].value===9?(u[f][m].value=0,u[f][m].incorrect=!1):(u[f][m].value++,u[f][m].incorrect=!1),v(u)}return l.exports.useEffect(()=>{let f;return t?clearInterval(f):f=setInterval(()=>{N(m=>m+=1)},1e3),()=>clearInterval(f)},[t]),l.exports.useEffect(()=>{v([...e])},[e]),h("div",{className:"sudoku-game-screen",children:[a("table",{className:"sudoku-board",cellPadding:"0",cellSpacing:"0",children:a("tbody",{children:i.length?i.map((f,m)=>a("tr",{className:"board-row",children:f.map((u,x)=>a("td",{className:`board-cell ${u.locked?"locked":""} ${t?"done":""}`,onClick:u.locked?void 0:()=>b(m,x),children:a("p",{className:`cell-value ${u.incorrect?"incorrect":""} ${t&&!u.locked&&!u.incorrect?"correct":""}`,children:u.value?u.value:null})},x))},m)):null})}),t?a(X,{difficulty:r,timer:k,attempts:n,accuracy:o}):a(Q,{difficulty:r,timer:k,attempts:n,accuracy:o}),h("div",{className:"game-btn-container",children:[a("button",{className:"btn back-btn",onClick:()=>c("IN_SELECT_DIFFICULTY"),children:t?"Play Again":"Back"}),t?null:a("button",{className:"btn try-solution-btn",onClick:()=>s(i),disabled:t,children:"Try Solution"})]})]})},ee=()=>{const{board:e,gameState:s}=l.exports.useContext(A);return h("div",{className:"App",children:[a("h2",{style:{marginBottom:"1rem"},children:"TAP SUDOKU"}),s==="IN_SELECT_DIFFICULTY"?a(J,{}):null,e.length?a(Z,{}):null]})};P.render(a(Y.StrictMode,{children:a(W,{children:a(ee,{})})}),document.getElementById("root"));
